<!DOCTYPE html>
<html>
   <head>
      <title>Search</title>
     
       <meta charset="utf-8">
       <!-- <script type="text/javascript" src="js/Mapscript.js"></script>-->
      <!-- <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapi-->
       
       <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapicore.js"></script>
       <script type="text/javascript" src="ms-appx:///Bing.Maps.JavaScript//js/veapiModules.js"></script>
       <script>Microsoft.Maps.registerModule('clusterModule');</script>
        <script type="text/javascript" src="js/V7ClientSideClustering.js"></script>
       
   </head>
   <body>
      <div id='mapDiv'></div> 
       <script type="text/javascript">

           window.onload(GetMap());
           var map;

           function GetMap() {

               map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), {

                   credentials: "AoUv-FMpF-A_zutBXGaP2Eh_GmpST6K5hyxByrOoY9uSPNY5TLT5dINTJbzyWCnk",
                 //  center: new Microsoft.Maps.Location(47.5, -122.3),
                   zoom: 9,
                   height: 800,
                   width: 1276,
                   showMapTypeSelector: false
                  
               });

               Microsoft.Maps.loadModule('Microsoft.Maps.Search', { callback: searchModuleLoaded });
               //return new WinJS.Promise.wrap(null);

           }


           function searchModuleLoaded() {
               var searchManager = new Microsoft.Maps.Search.SearchManager(map);

               var searchRequest = {
                   what: "pizza",
                   where: "Seattle",
                   count: 10,
                   startIndex: 0,
                   callback: searchCallback,
                   userData : { name: 'Maps Test User', id: 'XYZ' },
                   errorCallback: searchError

               };
               searchManager.search(searchRequest);
              // return new WinJS.Promise.wrap(null);
           }

           function searchCallback(searchResponse, userData) {
               console.log("The first search result is " + searchResponse.searchResults[0].name + ".");
           }


           function searchError(searchRequest) {
               console.log("An error occurred.");
           }

      </script>
   </body>
</html>